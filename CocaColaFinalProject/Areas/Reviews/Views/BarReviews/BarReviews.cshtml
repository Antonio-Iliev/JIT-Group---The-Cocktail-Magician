@model AllBarReviewsViewModel
@{
    ViewData["Title"] = "BarReviews";
}

<h1 class="hdr1">Reviews for @Model.BarName </h1>
<center>
    <h1 class="hdr4">Rating: </h1>
    @if (@Model.Rating == 0)
    {
        <i>Not rated yet!</i>
    }
    else
    {
        if (@Model.Rating * 10 % 10 == 0)
        {
            for (int i = 0; i < @Model.Rating - 1; i++)
            {
                <font color="gold" size="5">
                    <i class="fa fa-star" style="color:gold"></i>
                </font>
            }
            <font color="gold">
                <i class="fa fa-star" style="color:gold"><font size="5"> @Model.Rating</font></i>
            </font>
        }
        else
        {

            for (int i = 0; i < @Model.Rating - 1; i++)
            {
                <font color="gold" size="5">
                   <i class="fa fa-star" style="color:gold"></i>
                </font>
            }
            <font color="gold">
                <i class="fa fa-star-half" style="color:gold"> <font size="5"> @Model.Rating</font></i>
            </font>
        }
    }
</center>
@{
    var list = Model.Reviews.Select(r => r.UserID).ToList();
    if (!list.Contains(@User.FindFirstValue(ClaimTypes.NameIdentifier)))
    {
        var reviewVM = new BarReviewViewModel();
        reviewVM.BarId = Model.BarId;
        reviewVM.BarName = Model.BarName;

        <partial name="_CreateBarReviewPartial" model=reviewVM />
    }
}
<head>
    <style>
    </style>

</head>

<br />
<div class="row">
    <h3 class="hdr4">All Comments:</h3>
    <div class="col-md-8 col-md-offset-2">
        <ul class="commentList list-unstyled">
            <li>
                @if (@Model.Reviews.Count == 0)
                {
                    <h6 class="hdr3">No reviews yet</h6>
                }
                @foreach (var review in @Model.Reviews)
                {<center>
                        <div class="col-md-10 blog-main" style="padding-left:260px">
                            <div class="blog-post format-quote">
                                <div class="blog_thumbnail">
                                    <a href="7b_single-blog.html" class="box_text">
                                        <span class="ribbon_icon"><i class="fa fa-quote-left"></i></span>
                                        <blockquote class="inner">
                                            <p>
                                                "@review.Description"
                                                <br>
                                                <font style="color:gold">Grade: @review.Rating</font>

                                            </p>
                                            <span class="author">- The Coca-Cola Company, Cocktail Magician™, 2019 -</span>
                                        </blockquote>
                                    </a>
                                </div>
                                <div class="meta_box">
                                    <span class="meta_date">@review.ReviewDate</span>
                                    @*<span class="meta_comments"><a href="#"><em>21</em> <span>Comments</span></a></span>*@
                                    <span class="meta_author"><a href="#">Publisher: @review.UserName</a></span>
                                    @if (!review.LikedByUsers.Contains(@User.FindFirstValue(ClaimTypes.NameIdentifier)))
                                    {
                                        <form id="like-1" method="post" asp-area="Reviews" asp-controller="BarReviews" asp-action="LikeBarReview"
                                              asp-route-barReviewID="@review.Id" asp-route-barId="@review.BarId" asp-route-name="@review.BarName"
                                              data-barReviewID="@review.Id" data-barId="@review.BarId" data-name="@review.BarName">
                                            <button type="submit"
                                                    class="like-2"
                                                    data-barReviewID="@review.Id" data-barId="@review.BarId">
                                                <i class="fa fa-heart fa-lg text-danger"></i>
                                                <span> @review.LikeCount</span>
                                            </button>
                                        </form>
                                    }
                                    else
                                    {
                                        <form id="unlike-1" method="post" asp-area="Reviews" asp-controller="BarReviews" asp-action="RemoveLikeBarReview"
                                              asp-route-barReviewID="@review.Id" asp-route-barId="@review.BarId" asp-route-name="@review.BarName"
                                              data-barReviewID="@review.Id" data-barId="@review.BarId">
                                            <button type="submit"
                                                    class="unlike-2" data-barReviewID="@review.Id" data-barId="@review.BarId">
                                                <i class="fa fa-heart fa-lg text-danger"></i>
                                                <span>@review.LikeCount</span>
                                            </button>
                                        </form>
                                    }
                                </div>
                            </div>
                        </div>
                    </center>
                }
        </ul>
    </div>
</div>

<div>
    <a asp-action="Index" asp-controller="Bars" asp-area="Bars" class="btn btn-default">Back to List</a>
</div>

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/bootstrap/js/bootstrap.min.js"></script>

<script src="/assets/js/customscroll/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="/assets/js/flexslider/jquery.easing.1.3.min.js"></script>
<script src="/assets/js/flexslider/jquery.flexslider-min.js"></script>
<script src="/assets/js/prettyPhoto/js/jquery.prettyPhoto.js"></script>
<script src="/assets/js/bxslider/jquery.bxslider.min.js"></script>
<script src="/assets/twitter/js/jquery.tweet.js"></script>
<script src="/assets/js/jquery.hoverdir.js"></script>
<script src="/assets/js/jquery.arctext.js"></script>
<script src="/assets/js/jquery.placeholder.js"></script>
<script src="/assets/js/jquery.sticky.js"></script>

<script src="/assets/form/js/form.js"></script>
<script src="/assets/js/main.js"></script>
<script src="/assets/js/less.min.js"></script>

<script src="/assets/js/like.js"></script>

